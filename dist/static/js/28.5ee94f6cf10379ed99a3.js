webpackJsonp([28],{J9wQ:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("woOf"),o=t.n(s),i=t("0xDb"),l=t("dPTl"),r={data:function(){return{showProgress:!1,percentage:0,package:{appName:void 0,jsVersion:void 0,jsMD5:void 0,android:void 0,ios:void 0,timestamp:void 0,isForceUpdate:!1,published:!1,changelog:void 0,jsPath:void 0},upload_success:!1,loading:!1,creating:!1}},methods:{computedDate:function(e){return Object(i.b)(e,"{y}-{m}-{d} {h}:{i}")},on_progress:function(e,a,t){this.percentage=e.percent,this.percentage>=100&&(this.showProgress=!1)},on_success:function(e,a,t){console.log("response:",e),0===e.resCode?(this.loading=!1,this.upload_success=!0,this.package=o()({},e.data)):(this.$notify({title:"上传失败",message:"response.detail",type:"error",duration:2e3}),this.showProgress=!1,this.loading=!1)},before_upload:function(e){var a="application/zip"===e.type;return a?(this.showProgress=!0,a):(this.$message.error("只能上传ZIP格式的压缩包"),a)},on_error:function(e,a,t){console.log("error:",e)},createPackage:function(){var e=this;this.creating=!0,setTimeout(function(){Object(l.a)(e.package).then(function(a){e.creating=!1,e.upload_success=!1,e.$router.push("/package/package-list"),e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})})},2e3)}}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container calendar-list-container"},[e.upload_success?e._e():t("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"upload-demo",attrs:{drag:"",action:"http://weex.1234tv.com/package/upload","with-credentials":"true","on-progress":e.on_progress,"on-success":e.on_success,"on-error":e.on_error,"before-upload":e.before_upload,"element-loading-text":"文件处理中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("i",{staticClass:"el-icon-upload"}),e._v(" "),e.showProgress?e._e():t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),e._v(" "),e.showProgress?t("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:e.percentage,status:"success"}}):e._e(),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传zip文件，且不超过10M")])],1),e._v(" "),e.upload_success?t("div",{staticClass:"edit-package"},[t("el-form",{ref:"form",attrs:{model:e.package,"label-width":"150px"}},[t("el-form-item",{attrs:{label:e.$t("package.jsVersion"),prop:"jsVersion"}},[t("el-input",{attrs:{placeholder:"请输入更新包版本号"},model:{value:e.package.jsVersion,callback:function(a){e.$set(e.package,"jsVersion",a)},expression:"package.jsVersion"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("package.jsMD5"),prop:"jsMD5"}},[t("el-input",{attrs:{placeholder:"请输入更新包版本号",disabled:!0},model:{value:e.package.jsMD5,callback:function(a){e.$set(e.package,"jsMD5",a)},expression:"package.jsMD5"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("package.appName"),prop:"appName"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.package.appName,callback:function(a){e.$set(e.package,"appName",a)},expression:"package.appName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("package.ios"),prop:"ios"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.package.ios,callback:function(a){e.$set(e.package,"ios",a)},expression:"package.ios"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("package.android"),prop:"android"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.package.android,callback:function(a){e.$set(e.package,"android",a)},expression:"package.android"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("package.date"),prop:"date"}},[t("el-input",{attrs:{value:e.computedDate(e.package.timestamp),disabled:!0}},[e._v("{{}}")])],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("package.jsPath"),prop:"jsPath"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.package.jsPath,callback:function(a){e.$set(e.package,"jsPath",a)},expression:"package.jsPath"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("package.published"),prop:"published"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#f2f2f2"},model:{value:e.package.published,callback:function(a){e.$set(e.package,"published",a)},expression:"package.published"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("package.showUpdateAlert")}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#f2f2f2"},model:{value:e.package.showUpdateAlert,callback:function(a){e.$set(e.package,"showUpdateAlert",a)},expression:"package.showUpdateAlert"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("package.changelog")}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入更新包改动日志"},model:{value:e.package.changelog,callback:function(a){e.$set(e.package,"changelog",a)},expression:"package.changelog"}})],1)],1),e._v(" "),t("el-row",{attrs:{type:"flex",justify:"end"}},[t("el-button",{on:{click:function(a){e.upload_success=!1}}},[e._v(e._s(e.$t("table.cancel")))]),e._v(" "),t("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.creating,expression:"creating",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:e.createPackage}},[e._v(e._s(e.$t("table.confirm")))])],1)],1):e._e()],1)},staticRenderFns:[]};var n=t("VU/8")(r,c,!1,function(e){t("qXpF")},"data-v-ff25abe0",null);a.default=n.exports},SSp7:function(e,a,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n.footer[data-v-ff25abe0]{\n  width: 200px;\n  height: 100px;\n  margin-right: 20px;\n}\n",""])},qXpF:function(e,a,t){var s=t("SSp7");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("rjj0")("fbdd52fe",s,!0)}});